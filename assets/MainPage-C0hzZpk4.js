import{r as l,j as e,L as f,c as m}from"./index-B6U29ZPA.js";import{B as E,S as B}from"./SendEmail-NBJy7Jqa.js";import{e as L,a as $,B as S}from"./Box3-BZel3qf4.js";import{u as A}from"./store-u8fOXZZW.js";import"./index-C3IVKeGk.js";const h=s=>{const[g,a]=l.useState(window.matchMedia(s).matches);return l.useEffect(()=>{const i=window.matchMedia(s),n=()=>a(i.matches);return i.addEventListener("change",n),()=>i.removeEventListener("change",n)},[s]),g};function I(){var u,p,j;const s="1020px",g=h(`(min-width: ${s})`),{photos:a,fetchPhotos:i}=A(),n=localStorage.getItem("token"),[r,w]=l.useState(),[d,x]=l.useState(),[o,v]=l.useState({}),y=async()=>{if(g)try{const t=await m.get("/Api/get-all-banners",{headers:{Authorization:`Bearer ${n}`}});x(t.data[t.data.length-1].source)}catch(t){console.error("Error fetching photos:",t)}else try{const t=await m.get("/Api/get-all-banner-mobile",{headers:{Authorization:`Bearer ${n}`}});x(t.data[t.data.length-1].source)}catch(t){console.error("Error fetching photos:",t)}},N=async()=>{try{const t=await m.get("/CollectionProduct/get-all-collection-banner",{headers:{Authorization:`Bearer ${n}`}});w(t.data)}catch(t){console.error("Error fetching photos:",t)}},C=async()=>{var t;try{const c=await m.get("/CollectionGallery/get-gallery-collection?limit=1&page=1",{headers:{Authorization:`Bearer ${n}`}});v((t=c==null?void 0:c.data)==null?void 0:t.galleries[0][0])}catch(c){console.error(c)}};return l.useEffect(()=>{window.scroll(0,0),N()},[]),l.useEffect(()=>{const t=setTimeout(()=>{(a==null?void 0:a.length)>0?console.log("products have !!:"+a.length+";"):(i({page:1,limit:50}),console.log("===================================="),console.log("fetching !!"),console.log("===================================="))},5e3);return()=>clearTimeout(t)},[a]),l.useEffect(()=>{y(),C()},[]),console.log("===================================="),console.log(a),console.log("images",o),console.log("===================================="),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"box1",children:[(d==null?void 0:d.length)&&e.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:e.jsx("source",{src:d,type:"video/mp4"})}),e.jsx("div",{className:"box1newCollection",children:e.jsxs("div",{className:"newCollection",children:[e.jsxs("div",{className:"comLeftColl",children:[e.jsx("img",{src:L,alt:"element2Box1Logo",className:"element2Box1Logo"}),e.jsx("img",{src:$,className:"elementBox1Logo",alt:"elementBox1Logo"})]}),e.jsxs("div",{className:"comRightColl",children:[e.jsx("h2",{children:"New collection"}),e.jsx("h2",{children:(u=r==null?void 0:r[r.length-1])==null?void 0:u.name})]})]})})]}),e.jsxs("div",{className:"header headerBox2 ",children:[e.jsx("div",{className:"headerCom1",children:e.jsx("h2",{children:(p=r==null?void 0:r[r.length-1])==null?void 0:p.name})}),h(`(min-width: ${s})`)?e.jsx("div",{className:"headerCom2",children:e.jsx(f,{to:"products/all",children:"Смотреть все"})}):""]}),e.jsx(E,{arrDataImg:a.filter((t,c)=>t.popular&&c<32)}),h(`(max-width: ${s})`)?e.jsx("div",{className:"header headerBox2 ",style:{display:"flex",justifyContent:"center"},children:e.jsx("div",{className:"headerCom2",children:e.jsx(f,{to:"products/all",style:{margin:"0 auto"},children:"Смотреть все"})})}):"",h(`(min-width: ${s}`)?e.jsx(B,{}):"",((j=o==null?void 0:o.photos)==null?void 0:j.length)&&e.jsx(S,{images:o==null?void 0:o.photos,title:o==null?void 0:o.nameCollection,id:o==null?void 0:o.id}),h(`(max-width: ${s})`)?e.jsx(B,{}):""]})}export{I as default};
