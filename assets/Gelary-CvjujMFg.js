import{r as s,j as t,c as l}from"./index-B6U29ZPA.js";import{e as y,a as v,B as w}from"./Box3-BZel3qf4.js";import"./index-C3IVKeGk.js";function N(){var h;const c=localStorage.getItem("token"),[o,u]=s.useState([]),[i,d]=s.useState(!0),[m,g]=s.useState(1),[n,x]=s.useState(),[a,p]=s.useState(),f=async()=>{var e;try{const r=await l.get(`/CollectionGallery/get-gallery-collection?limit=50&page=${m}`,{headers:{Authorization:`Bearer ${c}`}});d(!1),g(m+1),u([...o,...(e=r==null?void 0:r.data)==null?void 0:e.galleries[0]])}catch(r){console.error(r)}},j=async()=>{try{const e=await l.get("/Api/get-all-banners",{headers:{Authorization:`Bearer ${c}`}});p(e.data[e.data.length-1].source)}catch(e){console.error("Error fetching photos:",e)}},B=async()=>{try{const e=await l.get("/CollectionProduct/get-all-collection-banner",{headers:{Authorization:`Bearer ${c}`}});x(e.data)}catch(e){console.error("Error fetching photos:",e)}};return s.useEffect(()=>{const e=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-50&&d(!0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),s.useEffect(()=>{i&&f()},[i]),s.useEffect(()=>{j(),B()},[]),console.log(o),t.jsxs("div",{className:"GelaryCom",children:[t.jsxs("div",{className:"box1",children:[(a==null?void 0:a.length)&&t.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:t.jsx("source",{src:a,type:"video/mp4"})}),t.jsx("div",{className:"box1newCollection",children:t.jsxs("div",{className:"newCollection",children:[t.jsxs("div",{className:"comLeftColl",children:[t.jsx("img",{src:y,alt:"element2Box1Logo",className:"element2Box1Logo"}),t.jsx("img",{src:v,className:"elementBox1Logo",alt:"elementBox1Logo"})]}),t.jsxs("div",{className:"comRightColl",children:[t.jsx("h2",{children:"New collection"}),t.jsx("h2",{children:(h=n==null?void 0:n[n.length-1])==null?void 0:h.name})]})]})})]}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("br",{}),o!=null&&o.length?o==null?void 0:o.map((e,r)=>t.jsx("div",{children:t.jsx(w,{images:e==null?void 0:e.photos,title:e==null?void 0:e.nameCollection,id:e==null?void 0:e.id})},r)):"Загрузка..."]})}export{N as default};
