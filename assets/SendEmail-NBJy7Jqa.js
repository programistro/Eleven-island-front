import{r as t,j as e,L as u,l as f,c as g}from"./index-B6U29ZPA.js";const j=a=>{const[l,r]=t.useState(window.matchMedia(a).matches);return t.useEffect(()=>{const o=window.matchMedia(a),d=()=>r(o.matches);return o.addEventListener("change",d),()=>o.removeEventListener("change",d)},[a]),l};function b({arrDataImg:a}){const[l,r]=t.useState(null),[o,d]=t.useState([]),p="1020px";return t.useEffect(()=>{if(a){let s=function(n){const i=parseInt(n.slice(1,3),16),h=parseInt(n.slice(3,5),16),x=parseInt(n.slice(5,7),16);return .299*i+.587*h+.114*x};const c=a==null?void 0:a.map(n=>({...n,colors:n.colors.sort((i,h)=>{const x=s(i.name.split("|")[0]);return s(h.name.split("|")[0])-x})}));console.log("sortedData",c),d(c)}},[a]),e.jsx("div",{className:"box2",children:e.jsxs("div",{className:"contentBox2",children:[e.jsx("h2",{className:"sr-only",children:"Products"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-[10px] gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",style:{gap:j(`(max-width: ${p})`)&&"15px 5px"},children:o?o==null?void 0:o.map((s,c)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"itemBox2 aspect-h-1 mx-auto aspect-w-1 xl:aspect-h-8 xl:aspect-w-7 relative ",children:[e.jsx(u,{to:`/product/${s==null?void 0:s.id}`,onMouseEnter:()=>r(c),onMouseLeave:()=>r(null),children:e.jsx("img",{className:"itemImgProduct aspect-h-1 aspect-w-1 w-full overflow-hidden bg-gray-200 xl:aspect-h-8 xl:aspect-w-7",src:f(l===c?s==null?void 0:s.images[1]:s==null?void 0:s.images[0])})},s==null?void 0:s.id),e.jsx("div",{className:"color-product",children:s==null?void 0:s.colors.map((n,i)=>e.jsx("div",{style:{border:"1px solid",padding:"1px",borderColor:s.id==n.name.split("|")[1]?"#000":"transparent"},children:e.jsx("nav",{onClick:()=>{console.log(n.name),document.location.href=`/product/${n.name.split("|")[1]}`},style:{backgroundColor:n.name.startsWith("#")?n.name.split("|")[0]:`#${n.name.split("|")[0]}`,border:n.name.split("|")[0]=="ffffff"||n.name.split("|")[0]=="#ffffff"?"1px solid #333":"0px"}})},i))}),e.jsxs("div",{className:"itemInfoProduct",children:[e.jsx("h2",{className:"productTitle",children:s==null?void 0:s.shortDescription}),e.jsxs("div",{className:"price__div price-product",children:[s.discount!=0&&e.jsxs("h4",{className:"skitka",style:{fontSize:"16px"},children:[" ",e.jsxs(e.Fragment,{children:[s==null?void 0:s.price," ",e.jsx("span",{style:{fontFamily:"font-book, sans-serif"},children:"₽"})]})]}),e.jsxs("h2",{className:"productPrice",style:{fontSize:"16px"},children:[s.discount!=0?s==null?void 0:s.discount:s==null?void 0:s.price," ",e.jsx("span",{style:{fontFamily:"font-book, sans-serif"},children:"₽"})]})]})]})]},c)})):e.jsx("h2",{children:"Загрузка..."})})]})})}function y(){const[a,l]=t.useState(""),[r,o]=t.useState(""),d=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),p=async s=>{if(s.preventDefault(),!d(a))o("Введите корректный email!");else{o("");const c=localStorage.getItem("token");try{const n=await g.post(`news_letter_subscriptions/${a}/deactivate`,{},{headers:{Authorization:`Bearer ${c}`}});l("")}catch(n){console.error(n)}}};return e.jsxs("div",{className:"sendEmail",children:[e.jsxs("div",{className:"sendEmailTop",children:[e.jsx("h2",{children:"Скоро новый дроп"}),e.jsx("p",{children:"Хочешь узнавать о всех новинках первый?"}),e.jsx("p",{children:"Подпишись на рассылку!"})]}),e.jsxs("form",{onSubmit:p,className:"sendEmailForm",children:[e.jsx("input",{type:"email",id:"email",onChange:s=>l(s.target.value.trim()),name:"email",placeholder:"Введите e-mail"}),r.length>0&&e.jsx("p",{className:"error-p-send-email",style:{position:"absolute",color:"red"},children:r}),e.jsx("button",{type:"submit",children:"Подписаться"})]})]})}export{b as B,y as S};
